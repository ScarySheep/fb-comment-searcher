<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>My test page</title>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
  </head>
<body>
<h1>Hello!</h1>
<button onclick="myFacebookLogin()">Login with Facebook</button>
<br>
<br>
Group id: <input type="text" id="groupID"><br>
Post id: <input type="text" id="postID"><br>
<button onclick="getJson()">Submit</button>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1984065068523485',
      xfbml      : true,
      version    : 'v2.12'
    });
    FB.AppEvents.logPageView();
  };

  (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);
   }(document, 'script', 'facebook-jssdk'));


   function myFacebookLogin() {
	 	 FB.login(function(response){
	 	 	if (response.authResponse) {
     			var user_access_token = response.authResponse.accessToken;
     			console.log('Access Token = '+ user_access_token);
   			} else {
     			console.log('User cancelled login or did not fully authorize.');
   			}
	 	 }, {scope: 'user_managed_groups'});
	}

	function removeDuplicates(arr){
    	let unique_array = []
   	 for(let i = 0;i < arr.length; i++){
    	    if(unique_array.indexOf(arr[i]) == -1){
    	        unique_array.push(arr[i])
    	    }
   	 }
  	  return unique_array
	}
	function compare(a_tag,a_comment){
		a_comment = removeDuplicates(a_comment);
		document.write("People tagged : ");
		document.write("<br>");
		for(var i=0; i<a_tag.length; i++){
			document.write(a_tag[i]+" ");
		}
		document.write("<br><br>");
		document.write("People that comment : ");
		document.write("<br>");
		for(var i=0; i<a_comment.length; i++){
			document.write(a_comment[i]+" ");
		}
		document.write("<br><br>");

		document.write("People haven't comment yet : ");
		var output = 1;
  		for(var i=0; i<a_tag.length; i++){
  			output = 1;
  			for(var j=0; j<a_comment.length; j++){
  				if(a_comment[j] == a_tag[i]){
  					output = 0;
  				}
  			}
  			if(output == 1){
  				document.write(a_tag[i]+" ");
  			}
  		}
	}

	function getJson(){
		var gID = document.getElementById('groupID').value;
		var pID = document.getElementById('postID').value;
		var full = "/"+gID+"_"+pID+"/comments";
		var tag_array = [];
		var comment_array = [];
		var tag_finish = 0;
		var comment_finish = 0;

		//console.log('path : '+full);
		FB.api(full,'GET',{
			"fields":"message_tags"
		},function(response) {
			for(i in response.data[0].message_tags){
				tag_array.push(response.data[0].message_tags[i].name);
			}
			tag_finish = 1;
			if(tag_finish&&comment_finish){
				console.log("fb finish");
				compare(tag_array,comment_array);
			}
  		});
  		FB.api(full,'GET',{
			"fields":"from"
		},function(response) {
			for(i in response.data){
				comment_array.push(response.data[i].from.name);
			}
			comment_finish = 1;
			if(tag_finish&&comment_finish){
				console.log("fb finish");
				compare(tag_array,comment_array);
			}
  		});
	}


/*		FB.api(
  '/160525368079820_173983936733963/comments',
  'GET',
  {"fields":"from"},
  function(response) {
      // Insert your code here
  }
);*/
</script>
</body>
</html>